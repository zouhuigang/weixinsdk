### 1.下单-JSAPI方式支付

> APP支付、公众号支付、小程序支付都是先返回：预支付交易单，然后用预支付交易码在进行支付操作； 小程序和公众号支付都需要获取用户的openid。具体的获取方式:[获取openid](https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=4_4)
> 

	//创建订单
	orderParm := z_weixin_service.NewUnifiedOrderParam()
	orderParm.Body = "测试商品"
	orderParm.OutTradeNo = "W" + orderIDGenerator(uid)
	orderParm.TotalFee = "1"
	orderParm.SpbillCreateIp = getIpAddress(r) //务必替换成获取的用户的真实IP
	orderParm.NotifyUrl = m_WEBURL + "web/payment/pay/weixin/notify"
	orderParm.TradeType = "JSAPI"
	orderParm.Openid = "ozc4fs4muzd98wAD4VaOLPH-LVcg" // JSAPI方式此参数必传

	//统一下单
	resParam, err := wxServerClient.UnifiedOrder(orderParm)
	if err != nil {
		return system.ResponeJson(ctx, system.ErrUnknown, data, err.Error())
	}

	jsApiParam := z_weixin_service.NewJsApiParameters()
	//下单成功，组合js前端需要的参数
	if resParam.ReturnCode == "SUCCESS" && resParam.ResultCode == "SUCCESS" { //调用成功
		jsApiParam, err = wxServerClient.GetJsApiParameters(resParam)
		if err != nil {
			return system.ResponeJson(ctx, system.ErrUnknown, data, err.Error())
		}
	}
	
	//返回给前端使用
	data["jsApiParam"] = jsApiParam


参数:

	appId: "wxadd472a86212b893"
	nonceStr: "6ltodszkd218gm14c8vcd2nxy73gsmft"
	paySign: "DECBAC4A84BB6BA93A9E9E6968BAD632"
	prepayId: "wx161717384153038cec1b80561518758800"
	sign: "DECBAC4A84BB6BA93A9E9E6968BAD632"
	timeStamp: 1568625458







